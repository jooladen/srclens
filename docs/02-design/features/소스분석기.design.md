# Design: ì†ŒìŠ¤ë¶„ì„ê¸° (SrcLens)

> Plan ë¬¸ì„œ ì°¸ì¡°: `docs/01-plan/features/ì†ŒìŠ¤ë¶„ì„ê¸°.plan.md`

---

## 1. ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| ê¸°ëŠ¥ëª… | ì†ŒìŠ¤ë¶„ì„ê¸° (SrcLens) |
| Phase | Design |
| ì‘ì„±ì¼ | 2026-02-21 |
| ê¸°ë°˜ Plan | ì†ŒìŠ¤ë¶„ì„ê¸°.plan.md |

---

## 2. í™”ë©´ ì„¤ê³„ (UI Mockup)

### 2-1. ì „ì²´ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SrcLens                          [KO / EN]         â”‚
â”‚  ë¦¬ì•¡íŠ¸ ì´ˆë³´ë¥¼ ìœ„í•œ ì½”ë“œ ë¶„ì„ê¸°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                              â”‚
â”‚   [ì½”ë“œ ì…ë ¥ ì˜ì—­]    â”‚      [ë¶„ì„ ê²°ê³¼ ì˜ì—­]         â”‚
â”‚                      â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                â”‚  â”‚  â”‚  í•œì¤„ ìš”ì•½            â”‚   â”‚
â”‚  â”‚  page.tsx ì½”ë“œ â”‚  â”‚  â”‚  "ì´ íŒŒì¼ì€ ...ì…ë‹ˆë‹¤"â”‚   â”‚
â”‚  â”‚  ë¶™ì—¬ë„£ê¸°...   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                â”‚  â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                      â”‚  â”‚  êµ¬ì¡° ë¶„ì„            â”‚   â”‚
â”‚  [íŒŒì¼ ì—…ë¡œë“œ] ë˜ëŠ”   â”‚  â”‚  â€¢ imports (3ê°œ)     â”‚   â”‚
â”‚  [ë¶„ì„í•˜ê¸°] ë²„íŠ¼      â”‚  â”‚  â€¢ hooks (2ê°œ)       â”‚   â”‚
â”‚                      â”‚  â”‚  â€¢ JSX ë°˜í™˜           â”‚   â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                              â”‚
â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                      â”‚  â”‚  ì„¹ì…˜ë³„ ì„¤ëª…          â”‚   â”‚
â”‚                      â”‚  â”‚  [imports] [hooks]    â”‚   â”‚
â”‚                      â”‚  â”‚  [ì»´í¬ë„ŒíŠ¸] [JSX]     â”‚   â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2-2. ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ (íƒ­ ì „í™˜)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SrcLens               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì½”ë“œ ì…ë ¥] [ê²°ê³¼ ë³´ê¸°]â”‚  â† íƒ­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚
â”‚  page.tsx ì½”ë“œ         â”‚
â”‚  ë¶™ì—¬ë„£ê¸°...           â”‚
â”‚                        â”‚
â”‚  [íŒŒì¼ ì—…ë¡œë“œ]         â”‚
â”‚  [ë¶„ì„í•˜ê¸°]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2-3. ë¶„ì„ ê²°ê³¼ ì¹´ë“œ ìƒì„¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•œì¤„ ìš”ì•½                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  "ì´ íŒŒì¼ì€ í™ˆ í™”ë©´ì„ ë³´ì—¬ì£¼ëŠ”       â”‚
â”‚   í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤."            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ ë¶ˆëŸ¬ì˜¤ê¸° (Imports) - 3ê°œ        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ react â†’ React ê¸°ë³¸ ê¸°ëŠ¥          â”‚
â”‚  â€¢ next/navigation â†’ í˜ì´ì§€ ì´ë™    â”‚
â”‚  â€¢ ./components/Button â†’ ë²„íŠ¼ UI   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª í›… (Hooks) - 2ê°œ               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ useState â†’ í™”ë©´ì— í‘œì‹œí•  ë°ì´í„°  â”‚
â”‚    ì €ì¥ì†Œ ì—­í•                       â”‚
â”‚  â€¢ useEffect â†’ í™”ë©´ì´ ì²˜ìŒ ì—´ë¦´ ë•Œ  â”‚
â”‚    ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¼ï¸ í™”ë©´ êµ¬ì„± (JSX)                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ <div> ìµœìƒìœ„ ê°ì‹¸ëŠ” ë°•ìŠ¤         â”‚
â”‚    â€¢ <h1> ì œëª©                      â”‚
â”‚    â€¢ <Button> í´ë¦­ ë²„íŠ¼             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° (Component Architecture)

```
app/
â”œâ”€â”€ page.tsx                  # ë©”ì¸ í˜ì´ì§€ (ì…ë ¥ + ê²°ê³¼ ë ˆì´ì•„ì›ƒ)
â”œâ”€â”€ layout.tsx                # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â””â”€â”€ api/
    â””â”€â”€ analyze/
        â””â”€â”€ route.ts          # POST /api/analyze â€” Claude API í˜¸ì¶œ

components/
â”œâ”€â”€ analyzer/
â”‚   â”œâ”€â”€ CodeInput.tsx         # ì½”ë“œ ì…ë ¥ í…ìŠ¤íŠ¸ì—ë¦¬ì–´ + íŒŒì¼ ì—…ë¡œë“œ
â”‚   â”œâ”€â”€ AnalyzeButton.tsx     # ë¶„ì„í•˜ê¸° ë²„íŠ¼ (ë¡œë”© ìƒíƒœ í¬í•¨)
â”‚   â”œâ”€â”€ ResultPanel.tsx       # ë¶„ì„ ê²°ê³¼ ì „ì²´ íŒ¨ë„
â”‚   â”œâ”€â”€ SummaryCard.tsx       # í•œì¤„ ìš”ì•½ ì¹´ë“œ
â”‚   â”œâ”€â”€ StructureCard.tsx     # êµ¬ì¡° ë¶„ì„ ì¹´ë“œ (imports/hooks/JSX ê°œìˆ˜)
â”‚   â””â”€â”€ SectionCard.tsx       # ì„¹ì…˜ë³„ ìƒì„¸ ì„¤ëª… ì¹´ë“œ (ì¬ì‚¬ìš©)
â””â”€â”€ ui/                       # shadcn/ui ì»´í¬ë„ŒíŠ¸
    â”œâ”€â”€ button.tsx
    â”œâ”€â”€ card.tsx
    â”œâ”€â”€ textarea.tsx
    â””â”€â”€ badge.tsx
```

---

## 4. ë°ì´í„° íë¦„ (Data Flow)

```
ì‚¬ìš©ì ì…ë ¥ (page.tsx ì½”ë“œ)
        â†“
[CodeInput] â†’ ìƒíƒœ ì €ì¥ (useState: code)
        â†“
[AnalyzeButton] í´ë¦­
        â†“
POST /api/analyze
  body: { code: string }
        â†“
[route.ts] ì½”ë“œ ì „ì²˜ë¦¬
  1. ì •ê·œì‹ìœ¼ë¡œ êµ¬ì¡° íŒŒì‹± (imports, hooks, JSX)
  2. Claude API í˜¸ì¶œ (êµ¬ì¡° + ì„¤ëª… ìƒì„± ìš”ì²­)
        â†“
Claude API ì‘ë‹µ
  {
    summary: string,
    sections: Section[]
  }
        â†“
[ResultPanel] â†’ ì¹´ë“œë³„ ë Œë”ë§
```

---

## 5. API ì„¤ê³„

### POST /api/analyze

**Request**
```typescript
{
  code: string  // page.tsx ì „ì²´ ì½”ë“œ (ìµœëŒ€ 50,000ì)
}
```

**Response**
```typescript
{
  summary: string           // í•œì¤„ ìš”ì•½ (2-3ë¬¸ì¥)
  sections: {
    type: "imports" | "hooks" | "component" | "jsx"
    title: string           // ì„¹ì…˜ ì œëª© (í•œêµ­ì–´)
    emoji: string           // ì„¹ì…˜ ì´ëª¨ì§€
    items: {
      code: string          // ì›ë³¸ ì½”ë“œ ì¡°ê°
      explanation: string   // ì´ˆë³´ììš© ì„¤ëª… (í•œêµ­ì–´)
    }[]
  }[]
  stats: {
    importCount: number
    hookCount: number
    isClientComponent: boolean
    isAsyncComponent: boolean
  }
}
```

**ì—ëŸ¬ ì‘ë‹µ**
```typescript
{
  error: string
  code: "INVALID_CODE" | "TOO_LARGE" | "API_ERROR"
}
```

---

## 6. Claude API í”„ë¡¬í”„íŠ¸ ì„¤ê³„

### ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
```
ë‹¹ì‹ ì€ ë¦¬ì•¡íŠ¸ë¥¼ ì²˜ìŒ ë°°ìš°ëŠ” í•œêµ­ì¸ ê°œë°œìë¥¼ ë„ì™€ì£¼ëŠ” ì¹œì ˆí•œ ì„ ìƒë‹˜ì…ë‹ˆë‹¤.
ì£¼ì–´ì§„ Next.js page.tsx ì½”ë“œë¥¼ ë¶„ì„í•˜ê³ , ì´ˆë“±í•™ìƒë„ ì´í•´í•  ìˆ˜ ìˆëŠ” ì‰¬ìš´ ë§ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”.

ê·œì¹™:
- ì „ë¬¸ ìš©ì–´ëŠ” ë°˜ë“œì‹œ ì‰¬ìš´ ë§ë¡œ í’€ì–´ì„œ ì„¤ëª…í•  ê²ƒ
- ì˜ˆ: useState â†’ "í™”ë©´ì— ë³´ì—¬ì¤„ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì„œë"
- ì˜ˆ: useEffect â†’ "í™”ë©´ì´ ì²˜ìŒ ì—´ë¦´ ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ"
- ê° ì„¤ëª…ì€ 1-2ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ
- ë°˜ë“œì‹œ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•  ê²ƒ
```

### ìœ ì € í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
```
ë‹¤ìŒ page.tsx ì½”ë“œë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”:

[ì½”ë“œ ì‚½ì…]

ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
{
  "summary": "ì´ íŒŒì¼ì´ í•˜ëŠ” ì¼ì„ 2-3ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…",
  "sections": [...]
}
```

---

## 7. ì½”ë“œ íŒŒì‹± ë¡œì§ (Pre-processing)

Claude API í˜¸ì¶œ ì „ ì •ê·œì‹ìœ¼ë¡œ ì‚¬ì „ íŒŒì‹±:

```typescript
// lib/parser.ts
export function parsePageTsx(code: string) {
  return {
    isClientComponent: code.includes("'use client'"),
    isAsyncComponent: /async\s+function|async\s+\(/.test(code),
    imports: extractImports(code),    // import ... from ... ì¶”ì¶œ
    hooks: extractHooks(code),        // useë¡œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œ ì¶”ì¶œ
    componentName: extractComponentName(code),  // export default í•¨ìˆ˜ëª…
  }
}
```

íŒŒì‹± ê²°ê³¼ë¥¼ Claude í”„ë¡¬í”„íŠ¸ì— í¬í•¨ì‹œì¼œ ë” ì •í™•í•œ ì„¤ëª… ìœ ë„

---

## 8. íŒŒì¼ êµ¬ì¡° (File Structure)

```
srclens/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # ë©”ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ layout.tsx            # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ globals.css           # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ analyze/
â”‚           â””â”€â”€ route.ts      # ë¶„ì„ API ë¼ìš°íŠ¸
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ analyzer/             # ë¶„ì„ê¸° ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ui/                   # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ parser.ts             # ì½”ë“œ íŒŒì‹± ìœ í‹¸
â”‚   â””â”€â”€ claude.ts             # Claude API í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ types/
â”‚   â””â”€â”€ analysis.ts           # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ .env.local                # ANTHROPIC_API_KEY
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.ts
â””â”€â”€ tsconfig.json
```

---

## 9. ìƒíƒœ ê´€ë¦¬ (State Management)

ì„œë²„ ì»´í¬ë„ŒíŠ¸ + í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ ì „ëµ:

```typescript
// app/page.tsx (Server Component)
// ë ˆì´ì•„ì›ƒë§Œ ë‹´ë‹¹, ë°ì´í„° fetching ì—†ìŒ

// components/analyzer/AnalyzerRoot.tsx (Client Component)
'use client'

type State = {
  code: string           // ì…ë ¥ëœ ì½”ë“œ
  status: 'idle' | 'loading' | 'success' | 'error'
  result: AnalysisResult | null
  error: string | null
}
```

React `useState` + `fetch` ì¡°í•© ì‚¬ìš© (ì™¸ë¶€ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆí•„ìš”)

---

## 10. êµ¬í˜„ ìˆœì„œ (Implementation Order)

1. **í”„ë¡œì íŠ¸ ì´ˆê¸°í™”** â€” Next.js 14 + Tailwind + shadcn/ui ì„¤ì¹˜
2. **íƒ€ì… ì •ì˜** â€” `types/analysis.ts`
3. **íŒŒì„œ êµ¬í˜„** â€” `lib/parser.ts`
4. **Claude í´ë¼ì´ì–¸íŠ¸** â€” `lib/claude.ts`
5. **API ë¼ìš°íŠ¸** â€” `app/api/analyze/route.ts`
6. **UI ì»´í¬ë„ŒíŠ¸** â€” CodeInput â†’ AnalyzeButton â†’ ResultPanel â†’ ì¹´ë“œë“¤
7. **ë©”ì¸ í˜ì´ì§€ ì¡°ë¦½** â€” `app/page.tsx`
8. **ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ ì¡°ì •**
9. **ì—ëŸ¬ ì²˜ë¦¬ & ë¡œë”© ìƒíƒœ**
10. **í…ŒìŠ¤íŠ¸** â€” ì‹¤ì œ page.tsx íŒŒì¼ë¡œ ê²€ì¦

---

## 11. í™˜ê²½ ë³€ìˆ˜

```
ANTHROPIC_API_KEY=sk-ant-...
```

---

## 12. ë‹¤ìŒ ë‹¨ê³„

- [ ] êµ¬í˜„ ì‹œì‘ (`/pdca do ì†ŒìŠ¤ë¶„ì„ê¸°`)
- [ ] `npx create-next-app@latest srclens` ì‹¤í–‰
- [ ] shadcn/ui ì´ˆê¸°í™”
- [ ] êµ¬í˜„ ìˆœì„œëŒ€ë¡œ ì½”ë“œ ì‘ì„±
